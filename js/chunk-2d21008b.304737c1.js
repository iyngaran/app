(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21008b"],{b5bd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"down-top-padding",attrs:{fluid:""}},[a("v-row",[a("h1",{staticClass:"display-1 font-weight-regular"},[t._v("Manage Awards")])]),a("v-row",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){return t.showForm(null)}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-pencil-plus-outline ")]),t._v(" Add New Award ")],1)],1),a("AwardForm",{ref:"award_form"}),a("v-row",[a("v-data-table",{staticClass:"elevation-1 col-12",attrs:{page:t.getCurrentPage,pageCount:t.getNumberOfPages,headers:t.getTableHeader,items:t.getAwards,"footer-props":{"items-per-page-options":[10,20,30,40,50,100]},options:t.options,"server-items-length":t.getTotalAwards,loading:t.getLoadingStatus},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.action",fn:function(e){var r=e.item;return[a("v-btn",{staticClass:"ma-1",attrs:{text:"",icon:"",color:"secondary"},on:{click:function(e){return t.showForm(r.data.attributes.id)}}},[a("v-icon",[t._v("mdi-pencil-outline")])],1),a("v-btn",{attrs:{text:"",icon:"",color:"danger"},on:{click:function(e){return t.showDeleteDialog(r.data.attributes)}}},[a("v-icon",[t._v("mdi-trash-can-outline")])],1)]}}])}),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",[t._v("Are you sure ?")]),a("v-card-text",[t._v("Do you want to delete `"+t._s(t.itemToDelete.title)+"`? ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogDelete=!1}}},[a("v-icon",[t._v("mdi-close")]),t._v(" No ")],1),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteItem(t.itemToDelete.id)}}},[a("v-icon",[t._v("mdi-trash-can-outline")]),t._v(" Yes ")],1)],1)],1)],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),i=a("5530"),s=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{staticClass:"mb-5 mt-2"},[a("v-spacer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Award Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{dense:"",items:t.certificates,"item-value":"id","item-text":"value",label:"Certificate*"},model:{value:t.certificate_id,callback:function(e){t.certificate_id=e},expression:"certificate_id"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.from_date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.from_date=e},"update:return-value":function(e){t.from_date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{required:"",label:"From Date*","prepend-icon":"mdi-calendar"},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}},"v-text-field",n,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.from_date)}}},[t._v(" OK ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{ref:"menu_to_date",attrs:{"close-on-content-click":!1,"return-value":t.to_date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.to_date=e},"update:return-value":function(e){t.to_date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{required:"",label:"To Date*","prepend-icon":"mdi-calendar"},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}},"v-text-field",n,!1),r))]}}]),model:{value:t.menu_to_date,callback:function(e){t.menu_to_date=e},expression:"menu_to_date"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_to_date=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_to_date.save(t.to_date)}}},[t._v(" OK ")])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Registration Number*",required:""},model:{value:t.registration_number,callback:function(e){t.registration_number=e},expression:"registration_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Certificate Number*"},model:{value:t.certificate_number,callback:function(e){t.certificate_number=e},expression:"certificate_number"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"NIC / Passport*",required:""},on:{keyup:t.searchStudentByNicOrPassportHandler},model:{value:t.nic_or_passport,callback:function(e){t.nic_or_passport=e},expression:"nic_or_passport"}}),this.foundStudent?a("div",{staticClass:"blue--text text--darken-2"},[t._v(" "+t._s(this.student.first_name)+" "+t._s(this.student.last_name)+" "),a("BR"),t._v(" "),a("strong",[t._v("Date Of Birth: ")]),t._v(" "+t._s(this.student.date_of_birth)+" ")],1):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.grades,label:"Grade*"},model:{value:t.grade,callback:function(e){t.grade=e},expression:"grade"}})],1)],1)],1),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning",dark:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" Close ")],1),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.awardCreateHandler}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-content-save ")]),t._v(" Save ")],1)],1)],1)],1)],1)],1)},d=[],l=(a("d81d"),a("ac1f"),a("1276"),{name:"AwardForm",data:function(){return{menu:!1,menu_to_date:!1,dialog:!1,certificates:[],grades:[],student:{id:null,first_name:null,last_name:null,date_of_birth:(new Date).toISOString().substr(0,10)},foundStudent:!1,nic_or_passport:null}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("award",["getAwardCreated","getAward"])),Object(s["c"])("student",["getStudent"])),Object(s["c"])("certificate",["getCertificates"])),{},{certificate_id:{get:function(){return this.$store.state.award.award.certificate_id},set:function(t){this.$store.commit("award/updateCertificateId",t)}},registration_number:{get:function(){return this.$store.state.award.award.registration_number},set:function(t){this.$store.commit("award/updateRegistrationNumber",t)}},from_date:{get:function(){return this.$store.state.award.award.from_date},set:function(t){this.$store.commit("award/updateFromDate",t)}},to_date:{get:function(){return this.$store.state.award.award.to_date},set:function(t){this.$store.commit("award/updateToDate",t)}},certificate_number:{get:function(){return this.$store.state.award.award.certificate_number},set:function(t){this.$store.commit("award/updateCertificateNumber",t)}},grade:{get:function(){return this.$store.state.award.award.grade},set:function(t){this.$store.commit("award/updateGrade",t)}}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("award",["addAward","fetchAward"])),Object(s["b"])("student",["fetchStudentByNicOrPassport"])),Object(s["b"])("certificate",["searchCertificates"])),{},{awardCreateHandler:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.addAward();case 2:1==t.getAwardCreated&&(t.dialog=!1);case 3:case"end":return e.stop()}}),e)})))()},showFormHandler:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.clearForm(),null==t){a.next=10;break}return a.next=4,e.fetchAward(t);case 4:r=e.getAward,e.nic_or_passport=r.student.nic,e.foundStudent=!0,e.student.first_name=r.student.first_name,e.student.last_name=r.student.last_name,e.student.date_of_birth=r.student.date_of_birth;case 10:e.dialog=!0;case 11:case"end":return a.stop()}}),a)})))()},clearForm:function(){this.title=null},searchStudentByNicOrPassportHandler:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.foundStudent=!1,r=t.target.value,a.next=4,e.fetchStudentByNicOrPassport(r);case 4:e.getStudent&&(e.foundStudent=!0,e.student=e.getStudent,e.$store.commit("award/updateStudentId",e.student.id));case 5:case"end":return a.stop()}}),a)})))()}}),mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.grades="-,Merit,Pass,Distinction".split(","),a={page:1,itemsPerPage:1e3,sortBy:["data.attributes.title"],sortDesc:[!0]},e.next=4,t.searchCertificates(a);case 4:r=[],t.getCertificates.map((function(t){r.push({id:t.data.attributes.id,value:t.data.attributes.title})})),t.certificates=r;case 7:case"end":return e.stop()}}),e)})))()}}),u=l,m=a("2877"),f=a("6544"),v=a.n(f),_=a("8336"),p=a("b0af"),b=a("99d9"),w=a("62ad"),g=a("a523"),h=a("2e4b"),x=a("169a"),k=a("132d"),O=a("e449"),C=a("0fd9"),D=a("b974"),j=a("2fa4"),A=a("8654"),V=Object(m["a"])(u,c,d,!1,null,"0da50fa9",null),S=V.exports;v()(V,{VBtn:_["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:w["a"],VContainer:g["a"],VDatePicker:h["a"],VDialog:x["a"],VIcon:k["a"],VMenu:O["a"],VRow:C["a"],VSelect:D["a"],VSpacer:j["a"],VTextField:A["a"]});var y={name:"Certificate",components:{AwardForm:S},computed:Object(i["a"])({},Object(s["c"])("award",["getAward","getAwards","getAwardDeleted","getLoadingStatus","getCurrentPage","getTotalAwards","getNumberOfPages","getTableHeader"])),data:function(){return Object(i["a"])(Object(i["a"])({},Object(s["d"])("award",["award"])),{},{dialogDelete:!1,itemToDelete:{},options:{}})},watch:{options:{handler:function(){var t=this.options;this.searchAwards(t)}},deep:!0},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])("award",["searchAwards","deleteAward"])),{},{showDeleteDialog:function(t){this.itemToDelete=t,this.dialogDelete=!this.dialogDelete},deleteItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.deleteAward(t);case 2:1==e.getAwardDeleted&&(e.dialogDelete=!1);case 3:case"end":return a.stop()}}),a)})))()},showForm:function(t){this.$refs.award_form.showFormHandler(t)}})},$=y,T=a("8fea"),R=Object(m["a"])($,r,n,!1,null,"245bae38",null);e["default"]=R.exports;v()(R,{VBtn:_["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VContainer:g["a"],VDataTable:T["a"],VDialog:x["a"],VIcon:k["a"],VRow:C["a"],VSpacer:j["a"]})}}]);
//# sourceMappingURL=chunk-2d21008b.304737c1.js.map